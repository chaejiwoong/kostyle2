<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
		PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ko.kostyle.mapper.ServiceCenterMapper">
	<!--QNA-->
	<select id="getQnaList" resultType="ko.kostyle.domain.ServiceCenterVo">
		<![CDATA[
		SELECT * FROM  notice WHERE category NOT LIKE '%notice%'
		]]>
	</select>
<!--	<select id="getQnaList" resultType="ko.kostyle.domain.ServiceCenterVo">-->
<!--		<![CDATA[-->
<!--		SELECT rownum rn, nno, title, content, category, created_date FROM  notice-->
<!--            WHERE category NOT LIKE '%notice%' AND rownum <= 10-->
<!--		]]>-->
<!--	</select>-->

	<select id="getQnaListWithPaging" resultType="ko.kostyle.domain.ServiceCenterVo">
		<![CDATA[
		SELECT nno, title, content, category, created_date FROM
			   (SELECT rownum rn, nno, title, content, category, created_date FROM notice
				WHERE rownum <= #{pageNum} * #{amount})
			WHERE rn > (#{pageNum} -1) * #{amount} AND category NOT LIKE '%notice%'
		]]>
	</select>
	<select id="getPurchase" resultType="ko.kostyle.domain.ServiceCenterVo">
		SELECT * FROM notice WHERE category = 'purchase'
	</select>
	<!--공지사항-->
	<select id="getNoticeList" resultType="ko.kostyle.domain.ServiceCenterVo">
		SELECT * FROM notice WHERE category LIKE '%notice%'
	</select>

	<select id="NoticeDetail" resultType="ko.kostyle.domain.ServiceCenterVo">
		SELECT * FROM notice WHERE nno = #{nno}
	</select>

	<select id="getNoticeListWithPaging" resultType="ko.kostyle.domain.ServiceCenterVo">
		<![CDATA[
		SELECT nno, title, content, category, created_date FROM
			(SELECT rownum rn, nno, title, content, category, created_date FROM notice
			 WHERE rownum <= #{pageNum} * #{amount})
		WHERE rn > (#{pageNum} -1) * #{amount} AND category LIKE '%notice%'
		]]>
	</select>
	<!--문의-->

	<!--전체 데이터 개수 처리-->
	<select id="noticeTotalCount" resultType="int">
		SELECT COUNT(*) FROM notice WHERE nno > 0
	</select>
<!--	<select id="getCategoryList" resultType="ko.kostyle.domain.ServiceCenterVo" parameterType="NoticeVo">-->
<!--&#45;&#45; 		SERLECT * FROM notice WHERE category = #{category}-->
<!--		SELECT * FROM notice-->
<!--		<WHERE>-->
<!--			<if></if>-->
<!--		</WHERE>-->
<!--	</select>-->
<!--QnA-->
	<insert id="insertNotice">
		INSERT INTO notice (nno, title, content, category, created_date)
		    VALUES (nno_seq.nextval, #{title}, #{content}, #{category},SYSDATE)
	</insert>
	<insert id="selectNoticeKey">
		<selectKey keyProperty="nno" order="BEFORE" resultType="long">
			SELECT nno_seq.nextval FROM notice
		</selectKey>
			INSERT INTO notice (nno, title, content, category, created_date) VALUES(#{nno}, #{title}, #{content}, #{category},SYSDATE)
	</insert>
	<insert id="insertQuestion">
		INSERT INTO question (qno, mno, title, content, created_date)
			VALUES (qno_seq.nextval, #{mno}, #{title}, #{content}, sysdate )
	</insert>

	<!--문의-->
</mapper>