<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ko.kostyle.mapper.AuctionMapper"> <!-- 고유한 도메인 -->

    <insert id="insertAuction" parameterType="ko.kostyle.domain.AuctionVO">

        <selectKey keyProperty="apno" order="BEFORE"
                   resultType="long">
            select apno_seq.nextval from dual
        </selectKey>
        insert into auction_product
        values (#{apno},#{name},#{start_price}, #{best_bid_price}, #{bid_unit}, sysdate, sysdate+1)
    </insert>
    
    <insert id="insertAuctionImg" parameterType="ko.kostyle.domain.AuctionImgVO">
    	insert into auction_img values(aino_seq.nextval, #{apno}, #{filepath}, #{filename}, #{uuid})
    </insert>
    
    <select id="auctionList" resultType="ko.kostyle.domain.AuctionVO">
    	select * from auction_product order by apno desc
    </select>
    
    <select id="auctionImgDetail" resultType="ko.kostyle.domain.AuctionImgVO">
    	select * from auction_img where apno = #{apno}
    </select>
</mapper>

